//Auto-generated by RSP Compiler
//Source: menu.rsp.html
part of trails;

/** Template, menu, for rendering the view. */
Future menu(HttpConnect connect) { //#2
  var _t0_, _cs_ = new List<HttpConnect>();
  HttpRequest request = connect.request;
  HttpResponse response = connect.response;
  if (!Rsp.init(connect, "text/html; charset=utf-8"))
    return new Future.value();

  response.write("""    <div class="space-menu"  >
        <ul role="menu" class="dropdown-menu"  id="menu">
          <li role="presentation" class="dropdown-header">Traces gps</li>
          <li role="presentation"><a class="loading-on-click" href="/trace.search" tabindex="-1" role="menuitem">Rechercher</a></li>
"""); //#2

  if (currentUser(request.session) != null) { //if#6

    response.write("""            <li role="presentation"><a class="loading-on-click" href="/trace.add" tabindex="-1" role="menuitem">Ajouter</a></li>
"""); //#7
  } //if

  response.write("""          <li class="divider" role="presentation"></li>
          <li role="presentation" class="dropdown-header">Compte """); //#9

  response.write(Rsp.nnx(currentUser(request.session) != null ? "de " + currentUser(request.session).login: "")); //#10


  response.write("""</li>
"""); //#10

  if (currentUser(request.session) != null) { //if#11

    response.write("""            <li role="presentation"><a  class="loading-on-click" href="/logout" tabindex="-1" role="menuitem">Se d√©connecter</a></li>
"""); //#12

  } else { //else#13

    response.write("""            <li role="presentation"><a  class="loading-on-click" href="/login" tabindex="-1" role="menuitem">Se connecter</a></li>
            <li role="presentation"><a  class="loading-on-click" href="/register" tabindex="-1" role="menuitem">S'enregistrer</a></li>
"""); //#14
  } //if

  response.write("""

        </ul>
    </div>
    <div class="space-contextual-menu"  />
"""); //#17

  return new Future.value();
}
